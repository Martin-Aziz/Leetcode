# ⏱️ MOCK INTERVIEW: Product of Array Except Self

**Difficulty:** 🟡 Medium  
**Pattern:** Array / Prefix Product  
**Time Limit:** ⏰ **25 minutes**  
**Points:** 100

---

## 🎯 Interview Simulation

**Start your timer NOW!** ⏰

---

## 📋 Problem Statement

Given an integer array `nums`, return an array `answer` such that `answer[i]` is equal to the product of all the elements of `nums` except `nums[i]`.

**You must write an algorithm that runs in O(n) time and without using the division operation.**

### Examples:

```
Input: nums = [1,2,3,4]
Output: [24,12,8,6]

Input: nums = [-1,1,0,-3,3]
Output: [0,0,9,0,0]
```

### Constraints:
- `2 <= nums.length <= 10^5`
- `-30 <= nums[i] <= 30`

### Follow-up:
Can you solve it in O(1) extra space? (Output array doesn't count)

---

## ❓ Clarifying Questions

1. **"Can I use division?"** → No
2. **"What's the time complexity requirement?"** → O(n)
3. **"Do I need to handle zeros?"** → Yes
4. **"Does output array count as extra space?"** → No

---

## 💭 Think Out Loud

"I see O(n) time without division. This suggests I can't compute total product and divide. I need to think about products from the left and right of each index..."

---

## 💡 Optional Hints

<details>
<summary>🆘 Hint 1: What is answer[i]? (−5 points)</summary>

`answer[i] = (product of all left) × (product of all right)`

Split into prefix and suffix products!

</details>

<details>
<summary>🆘 Hint 2: How to optimize space? (−10 points)</summary>

Use the output array to store prefix products first, then multiply by suffix products in a second pass!

</details>

<details>
<summary>🆘 Hint 3: Code structure? (−15 points)</summary>

```python
# Pass 1: Build prefix in answer
answer[i] = answer[i-1] * nums[i-1]

# Pass 2: Multiply by suffix
suffix = 1
for i in reversed range:
    answer[i] *= suffix
    suffix *= nums[i]
```

</details>

---

## 🧑‍💻 Your Solution Space

```python
def productExceptSelf(nums: list[int]) -> list[int]:
    """
    Calculate product of array except self.
    
    Args:
        nums: Array of integers
        
    Returns:
        Array where answer[i] = product of all except nums[i]
    """
    # Your code here
    pass


# Test your solution
if __name__ == "__main__":
    assert productExceptSelf([1,2,3,4]) == [24,12,8,6]
    assert productExceptSelf([-1,1,0,-3,3]) == [0,0,9,0,0]
    print("✅ All tests passed!")
```

---

## ⏰ Time Check!

- ⏱️ **10 min:** Should have approach
- ⏱️ **18 min:** Should have O(1) space solution
- ⏱️ **22 min:** Should be testing
- ⏱️ **25 min:** TIME'S UP!

---

## ✅ Optimal Solution

<details>
<summary><b>🔍 Click to Reveal</b></summary>

```python
def productExceptSelf(nums: list[int]) -> list[int]:
    """
    O(n) time, O(1) space solution using prefix-suffix approach.
    
    Time: O(n) - two passes
    Space: O(1) - only output array
    """
    n = len(nums)
    answer = [1] * n
    
    # Build prefix products
    for i in range(1, n):
        answer[i] = answer[i-1] * nums[i-1]
    
    # Multiply by suffix products
    suffix = 1
    for i in range(n-1, -1, -1):
        answer[i] *= suffix
        suffix *= nums[i]
    
    return answer
```

</details>

---

## 🎯 Grading Rubric (100 Points)

### 1️⃣ Correctness (40 points)
- All test cases pass: 20 pts
- Handles zeros correctly: 10 pts
- Handles negatives: 5 pts
- Returns correct type: 5 pts

### 2️⃣ Time Complexity (25 points)
- Achieves O(n): 20 pts
- Explains why: 5 pts
- **Penalty:** O(n²): -20 pts

### 3️⃣ Space Complexity (15 points)
- O(1) space (excluding output): 12 pts
- Correctly explains: 3 pts

### 4️⃣ Code Quality (10 points)
- Clean structure: 5 pts
- Good variable names: 3 pts
- Proper initialization: 2 pts

### 5️⃣ Communication (10 points)
- Explained approach: 5 pts
- Asked questions: 3 pts
- Tested: 2 pts

### Penalties:
- Used hints: -5, -10, -15
- Wrong answer: -30
- Overtime: -10
- Used division: -20

---

## 📈 Your Performance Summary

| Metric | Your Result |
|--------|-------------|
| **Total Score** | ___/100 |
| **Time Taken** | ___ min |
| **Space Achieved** | O(n) / O(1) |

---

## 🚀 Next Challenge

**Continue to:** `10.Lowest-Common-Ancestor-of-BST-Teaching-Mode.md`

---

*"Prefix + Suffix = Complete Picture!"* 🎯✨
